<!DOCTYPE html>
<HTML>
<HEAD>
	<TITLE> ZTREE DEMO - checkbox</TITLE>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="./css/demo.css" type="text/css">
	<link rel="stylesheet" href="./css/zTreeStyle/zTreeStyle.css" type="text/css">
	<script type="text/javascript" src="./js/jquery-1.4.4.min.js"></script>
	<script type="text/javascript" src="./js/jquery.ztree.core-3.5.js"></script>
	<script type="text/javascript" src="./js/jquery.ztree.excheck-3.5.js"></script>
	<!--
	<script type="text/javascript" src="../../../js/jquery.ztree.exedit-3.5.js"></script>
	-->
	<SCRIPT type="text/javascript">
		<!--
function zTreeOnCheck(event, treeId, treeNode) {
         alert(treeNode.id + ", " +treeNode.pId+","+ treeNode.name + "," + treeNode.checked);  
          var zTree = $.fn.zTree.getZTreeObj("treeDemo");
	      checkCount = zTree.getCheckedNodes(true);
	      $.each(checkCount,function(i) { 
	        alert(checkCount[i].id);
	        alert(checkCount[i].pId);
	        alert(checkCount[i].name);
	      });
	   
     }; 

 var setting = {
           callback: {
		        onCheck: zTreeOnCheck
	        },
           
			check: {
				enable: true
			},
			data: {
				simpleData: {
					enable: true,
			        idKey: "id",
			        pIdKey: "pId",
			        rootPId: 0,

				}
			}
		};   
		  
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
function getOut(){ 
    $.ajax({
        type:'get', 
        dataType:'json',  
        url:'out.jsp?id='+Math.random(),  
        
        success: function(data){
           var d = data.data;
           $.each(d,function(i){});
          $.fn.zTree.init($("#treeDemo"), setting, d);		 
	
        },//success
            
        error: function(data){
	    		 alert("error");}//error结束    
	    		     		 
	}); //ajax结束    
	
	
	 
 }
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
   $(document).ready(function(){
		getOut();						
	});
	</SCRIPT>
</HEAD>

<BODY>
<h1>测试</h1>
<div class="content_wrap">
	<div class="zTreeDemoBackground left">
		<ul id="treeDemo" class="ztree"></ul>
	</div>
</div>
</BODY>
</HTML>